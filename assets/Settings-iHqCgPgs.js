import{r as S,j as t,c as K,p as ns}from"./vendor-Se1CAlJD.js";import{C as fe,D as U,F as ss,u as It,G as as,H as Te,J as Lt,B as q,K as Ut,O as Bt,Q as is,R as jt,S as rs,U as kt,V as cs,W as We,X as he,Y as wt,Z as ls,_ as os,$ as ds,j as Et,a0 as us,a1 as Ot,a2 as Xe,a3 as Dt,a4 as qe,L as gs,a5 as fs,a6 as Mt,a7 as hs,e as ms,a8 as xs,a9 as Nt,aa as ps,ab as bs,ac as _t,ad as Ct,ae as St,af as vs,ag as ys,ah as js,ai as ws,aj as Ns,ak as _s,al as Cs}from"./index-cX7xNzSj.js";import{c as Ae,g as Ss}from"./auth-PrcDRVv8.js";import{b as _,d as Ye,H as As,a as Ts,j as Ps}from"./react-dom-PGDK0Dvr.js";import{I as ie,a as B,F as Is}from"./Icons-b9E2CxRo.js";import"./hls-zqvr_1ex.js";import"./caption-parsing-KgWHY-ZV.js";import"./ietf-language-tags-BPvdlnin.js";import"./locales-PAqV36SG.js";var Pe={exports:{}};Pe.exports;(function(s,i){var c=200,d="__lodash_hash_undefined__",l=1,m=2,h=9007199254740991,u="[object Arguments]",p="[object Array]",k="[object AsyncFunction]",A="[object Boolean]",x="[object Date]",M="[object Error]",E="[object Function]",W="[object GeneratorFunction]",T="[object Map]",I="[object Number]",R="[object Null]",o="[object Object]",X="[object Promise]",f="[object Proxy]",P="[object RegExp]",Z="[object Set]",me="[object String]",Le="[object Symbol]",Ue="[object Undefined]",re="[object WeakMap]",xe="[object ArrayBuffer]",ce="[object DataView]",Be="[object Float32Array]",pe="[object Float64Array]",ke="[object Int8Array]",Ee="[object Int16Array]",Oe="[object Int32Array]",be="[object Uint8Array]",De="[object Uint8ClampedArray]",Je="[object Uint16Array]",Ht="[object Uint32Array]",Ft=/[\\^$.*+?()[\]{}|]/g,Kt=/^\[object .+?Constructor\]$/,zt=/^(?:0|[1-9]\d*)$/,b={};b[Be]=b[pe]=b[ke]=b[Ee]=b[Oe]=b[be]=b[De]=b[Je]=b[Ht]=!0,b[u]=b[p]=b[xe]=b[A]=b[ce]=b[x]=b[M]=b[E]=b[T]=b[I]=b[o]=b[P]=b[Z]=b[me]=b[re]=!1;var Qe=typeof Ae=="object"&&Ae&&Ae.Object===Object&&Ae,Gt=typeof self=="object"&&self&&self.Object===Object&&self,z=Qe||Gt||Function("return this")(),Ze=i&&!i.nodeType&&i,Ve=Ze&&!0&&s&&!s.nodeType&&s,et=Ve&&Ve.exports===Ze,Me=et&&Qe.process,tt=function(){try{return Me&&Me.binding&&Me.binding("util")}catch{}}(),nt=tt&&tt.isTypedArray;function $t(e,n){for(var a=-1,r=e==null?0:e.length,v=0,g=[];++a<r;){var j=e[a];n(j,a,e)&&(g[v++]=j)}return g}function qt(e,n){for(var a=-1,r=n.length,v=e.length;++a<r;)e[v+a]=n[a];return e}function Wt(e,n){for(var a=-1,r=e==null?0:e.length;++a<r;)if(n(e[a],a,e))return!0;return!1}function Xt(e,n){for(var a=-1,r=Array(e);++a<e;)r[a]=n(a);return r}function Yt(e){return function(n){return e(n)}}function Jt(e,n){return e.has(n)}function Qt(e,n){return e==null?void 0:e[n]}function Zt(e){var n=-1,a=Array(e.size);return e.forEach(function(r,v){a[++n]=[v,r]}),a}function Vt(e,n){return function(a){return e(n(a))}}function en(e){var n=-1,a=Array(e.size);return e.forEach(function(r){a[++n]=r}),a}var tn=Array.prototype,nn=Function.prototype,ve=Object.prototype,Re=z["__core-js_shared__"],st=nn.toString,F=ve.hasOwnProperty,at=function(){var e=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),it=ve.toString,sn=RegExp("^"+st.call(F).replace(Ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=et?z.Buffer:void 0,ye=z.Symbol,ct=z.Uint8Array,lt=ve.propertyIsEnumerable,an=tn.splice,V=ye?ye.toStringTag:void 0,ot=Object.getOwnPropertySymbols,rn=rt?rt.isBuffer:void 0,cn=Vt(Object.keys,Object),He=le(z,"DataView"),oe=le(z,"Map"),Fe=le(z,"Promise"),Ke=le(z,"Set"),ze=le(z,"WeakMap"),de=le(Object,"create"),ln=ne(He),on=ne(oe),dn=ne(Fe),un=ne(Ke),gn=ne(ze),dt=ye?ye.prototype:void 0,Ge=dt?dt.valueOf:void 0;function ee(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var r=e[n];this.set(r[0],r[1])}}function fn(){this.__data__=de?de(null):{},this.size=0}function hn(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function mn(e){var n=this.__data__;if(de){var a=n[e];return a===d?void 0:a}return F.call(n,e)?n[e]:void 0}function xn(e){var n=this.__data__;return de?n[e]!==void 0:F.call(n,e)}function pn(e,n){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=de&&n===void 0?d:n,this}ee.prototype.clear=fn,ee.prototype.delete=hn,ee.prototype.get=mn,ee.prototype.has=xn,ee.prototype.set=pn;function G(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var r=e[n];this.set(r[0],r[1])}}function bn(){this.__data__=[],this.size=0}function vn(e){var n=this.__data__,a=we(n,e);if(a<0)return!1;var r=n.length-1;return a==r?n.pop():an.call(n,a,1),--this.size,!0}function yn(e){var n=this.__data__,a=we(n,e);return a<0?void 0:n[a][1]}function jn(e){return we(this.__data__,e)>-1}function wn(e,n){var a=this.__data__,r=we(a,e);return r<0?(++this.size,a.push([e,n])):a[r][1]=n,this}G.prototype.clear=bn,G.prototype.delete=vn,G.prototype.get=yn,G.prototype.has=jn,G.prototype.set=wn;function te(e){var n=-1,a=e==null?0:e.length;for(this.clear();++n<a;){var r=e[n];this.set(r[0],r[1])}}function Nn(){this.size=0,this.__data__={hash:new ee,map:new(oe||G),string:new ee}}function _n(e){var n=Ne(this,e).delete(e);return this.size-=n?1:0,n}function Cn(e){return Ne(this,e).get(e)}function Sn(e){return Ne(this,e).has(e)}function An(e,n){var a=Ne(this,e),r=a.size;return a.set(e,n),this.size+=a.size==r?0:1,this}te.prototype.clear=Nn,te.prototype.delete=_n,te.prototype.get=Cn,te.prototype.has=Sn,te.prototype.set=An;function je(e){var n=-1,a=e==null?0:e.length;for(this.__data__=new te;++n<a;)this.add(e[n])}function Tn(e){return this.__data__.set(e,d),this}function Pn(e){return this.__data__.has(e)}je.prototype.add=je.prototype.push=Tn,je.prototype.has=Pn;function Y(e){var n=this.__data__=new G(e);this.size=n.size}function In(){this.__data__=new G,this.size=0}function Ln(e){var n=this.__data__,a=n.delete(e);return this.size=n.size,a}function Un(e){return this.__data__.get(e)}function Bn(e){return this.__data__.has(e)}function kn(e,n){var a=this.__data__;if(a instanceof G){var r=a.__data__;if(!oe||r.length<c-1)return r.push([e,n]),this.size=++a.size,this;a=this.__data__=new te(r)}return a.set(e,n),this.size=a.size,this}Y.prototype.clear=In,Y.prototype.delete=Ln,Y.prototype.get=Un,Y.prototype.has=Bn,Y.prototype.set=kn;function En(e,n){var a=_e(e),r=!a&&Jn(e),v=!a&&!r&&$e(e),g=!a&&!r&&!v&&vt(e),j=a||r||v||g,w=j?Xt(e.length,String):[],N=w.length;for(var y in e)(n||F.call(e,y))&&!(j&&(y=="length"||v&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||$n(y,N)))&&w.push(y);return w}function we(e,n){for(var a=e.length;a--;)if(mt(e[a][0],n))return a;return-1}function On(e,n,a){var r=n(e);return _e(e)?r:qt(r,a(e))}function ue(e){return e==null?e===void 0?Ue:R:V&&V in Object(e)?zn(e):Yn(e)}function ut(e){return ge(e)&&ue(e)==u}function gt(e,n,a,r,v){return e===n?!0:e==null||n==null||!ge(e)&&!ge(n)?e!==e&&n!==n:Dn(e,n,a,r,gt,v)}function Dn(e,n,a,r,v,g){var j=_e(e),w=_e(n),N=j?p:J(e),y=w?p:J(n);N=N==u?o:N,y=y==u?o:y;var L=N==o,H=y==o,C=N==y;if(C&&$e(e)){if(!$e(n))return!1;j=!0,L=!1}if(C&&!L)return g||(g=new Y),j||vt(e)?ft(e,n,a,r,v,g):Fn(e,n,N,a,r,v,g);if(!(a&l)){var O=L&&F.call(e,"__wrapped__"),D=H&&F.call(n,"__wrapped__");if(O||D){var Q=O?e.value():e,$=D?n.value():n;return g||(g=new Y),v(Q,$,a,r,g)}}return C?(g||(g=new Y),Kn(e,n,a,r,v,g)):!1}function Mn(e){if(!bt(e)||Wn(e))return!1;var n=xt(e)?sn:Kt;return n.test(ne(e))}function Rn(e){return ge(e)&&pt(e.length)&&!!b[ue(e)]}function Hn(e){if(!Xn(e))return cn(e);var n=[];for(var a in Object(e))F.call(e,a)&&a!="constructor"&&n.push(a);return n}function ft(e,n,a,r,v,g){var j=a&l,w=e.length,N=n.length;if(w!=N&&!(j&&N>w))return!1;var y=g.get(e);if(y&&g.get(n))return y==n;var L=-1,H=!0,C=a&m?new je:void 0;for(g.set(e,n),g.set(n,e);++L<w;){var O=e[L],D=n[L];if(r)var Q=j?r(D,O,L,n,e,g):r(O,D,L,e,n,g);if(Q!==void 0){if(Q)continue;H=!1;break}if(C){if(!Wt(n,function($,se){if(!Jt(C,se)&&(O===$||v(O,$,a,r,g)))return C.push(se)})){H=!1;break}}else if(!(O===D||v(O,D,a,r,g))){H=!1;break}}return g.delete(e),g.delete(n),H}function Fn(e,n,a,r,v,g,j){switch(a){case ce:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case xe:return!(e.byteLength!=n.byteLength||!g(new ct(e),new ct(n)));case A:case x:case I:return mt(+e,+n);case M:return e.name==n.name&&e.message==n.message;case P:case me:return e==n+"";case T:var w=Zt;case Z:var N=r&l;if(w||(w=en),e.size!=n.size&&!N)return!1;var y=j.get(e);if(y)return y==n;r|=m,j.set(e,n);var L=ft(w(e),w(n),r,v,g,j);return j.delete(e),L;case Le:if(Ge)return Ge.call(e)==Ge.call(n)}return!1}function Kn(e,n,a,r,v,g){var j=a&l,w=ht(e),N=w.length,y=ht(n),L=y.length;if(N!=L&&!j)return!1;for(var H=N;H--;){var C=w[H];if(!(j?C in n:F.call(n,C)))return!1}var O=g.get(e);if(O&&g.get(n))return O==n;var D=!0;g.set(e,n),g.set(n,e);for(var Q=j;++H<N;){C=w[H];var $=e[C],se=n[C];if(r)var yt=j?r(se,$,C,n,e,g):r($,se,C,e,n,g);if(!(yt===void 0?$===se||v($,se,a,r,g):yt)){D=!1;break}Q||(Q=C=="constructor")}if(D&&!Q){var Ce=e.constructor,Se=n.constructor;Ce!=Se&&"constructor"in e&&"constructor"in n&&!(typeof Ce=="function"&&Ce instanceof Ce&&typeof Se=="function"&&Se instanceof Se)&&(D=!1)}return g.delete(e),g.delete(n),D}function ht(e){return On(e,Vn,Gn)}function Ne(e,n){var a=e.__data__;return qn(n)?a[typeof n=="string"?"string":"hash"]:a.map}function le(e,n){var a=Qt(e,n);return Mn(a)?a:void 0}function zn(e){var n=F.call(e,V),a=e[V];try{e[V]=void 0;var r=!0}catch{}var v=it.call(e);return r&&(n?e[V]=a:delete e[V]),v}var Gn=ot?function(e){return e==null?[]:(e=Object(e),$t(ot(e),function(n){return lt.call(e,n)}))}:es,J=ue;(He&&J(new He(new ArrayBuffer(1)))!=ce||oe&&J(new oe)!=T||Fe&&J(Fe.resolve())!=X||Ke&&J(new Ke)!=Z||ze&&J(new ze)!=re)&&(J=function(e){var n=ue(e),a=n==o?e.constructor:void 0,r=a?ne(a):"";if(r)switch(r){case ln:return ce;case on:return T;case dn:return X;case un:return Z;case gn:return re}return n});function $n(e,n){return n=n??h,!!n&&(typeof e=="number"||zt.test(e))&&e>-1&&e%1==0&&e<n}function qn(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Wn(e){return!!at&&at in e}function Xn(e){var n=e&&e.constructor,a=typeof n=="function"&&n.prototype||ve;return e===a}function Yn(e){return it.call(e)}function ne(e){if(e!=null){try{return st.call(e)}catch{}try{return e+""}catch{}}return""}function mt(e,n){return e===n||e!==e&&n!==n}var Jn=ut(function(){return arguments}())?ut:function(e){return ge(e)&&F.call(e,"callee")&&!lt.call(e,"callee")},_e=Array.isArray;function Qn(e){return e!=null&&pt(e.length)&&!xt(e)}var $e=rn||ts;function Zn(e,n){return gt(e,n)}function xt(e){if(!bt(e))return!1;var n=ue(e);return n==E||n==W||n==k||n==f}function pt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=h}function bt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function ge(e){return e!=null&&typeof e=="object"}var vt=nt?Yt(nt):Rn;function Vn(e){return Qn(e)?En(e):Hn(e)}function es(){return[]}function ts(){return!1}s.exports=Zn})(Pe,Pe.exports);var Ls=Pe.exports;const Us=Ss(Ls);function ae(s){const[i,c]=S.useState(void 0);S.useEffect(()=>{c(void 0)},[s]);const d=S.useMemo(()=>!Us(i,s)&&i!==void 0,[i,s]),l=S.useCallback(u=>{u instanceof Function?c(p=>u(p!==void 0?p:s)):c(u)},[s,c]),m=i===void 0?s:i,h=S.useCallback(()=>c(void 0),[c]);return[m,l,h,d]}function Bs(s,i,c,d,l,m,h){const[u,p,k,A]=ae(l),[x,M,E,W]=ae(m),[T,I,R,o]=ae(s),[X,f,P,Z]=ae(i),[me,Le,Ue,re]=ae(c),[xe,ce,Be,pe]=ae(d),[ke,Ee,Oe,be]=ae(h);function De(){R(),P(),Ue(),k(),E(),Be(),Oe()}return{reset:De,changed:o||Z||re||pe||W||A||be,theme:{state:T,set:I,changed:o},appLanguage:{state:X,set:f,changed:Z},subtitleStyling:{state:me,set:Le,changed:re},deviceName:{state:xe,set:ce,changed:pe},proxyUrls:{state:u,set:p,changed:A},backendUrl:{state:x,set:M,changed:W},profile:{state:ke,set:Ee,changed:be}}}function Ie(s){return t.jsx("div",{className:K("w-full rounded-lg bg-settings-card-background bg-opacity-[0.15] border border-settings-card-border",s.paddingClass??"px-8 py-6",s.className),children:s.children})}function Rt(s){return t.jsx("div",{className:K("w-full rounded-lg bg-settings-card-altBackground bg-opacity-50",s.paddingClass??"px-8 py-6",s.className),children:s.children})}function ks(){const{t:s}=_(),i=fe(),c=U(u=>u.account),{logout:d}=ss(),l=It("account-delete"),[m,h]=Ye(async()=>{c&&(await as(i,c),await d(),l.hide())},[d,c,i,l.hide]);return c?t.jsxs("div",{children:[t.jsx(Te,{border:!0,children:s("settings.account.actions.title")}),t.jsxs(Rt,{paddingClass:"px-6 py-12",className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-12",children:[t.jsxs("div",{children:[t.jsx(Lt,{children:s("settings.account.actions.delete.title")}),t.jsx("p",{className:"text-type-text",children:s("settings.account.actions.delete.text")})]}),t.jsx("div",{className:"flex justify-start lg:justify-end items-center",children:t.jsx(q,{theme:"danger",loading:m.loading,onClick:l.show,children:s("settings.account.actions.delete.button")})})]}),t.jsx(Ut,{id:l.id,children:t.jsxs(Bt,{children:[t.jsx(Te,{className:"!mt-0",children:s("settings.account.actions.delete.confirmTitle")}),t.jsx(is,{children:s("settings.account.actions.delete.confirmDescription")}),t.jsx(q,{theme:"danger",loading:m.loading,onClick:h,children:s("settings.account.actions.delete.confirmButton")})]})})]}):null}function Es(s){const{t:i}=_();return t.jsx(Ut,{id:s.id,children:t.jsxs(Bt,{children:[t.jsx(Te,{className:"!mt-0",children:i("settings.account.profile.title")}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(jt,{label:i("settings.account.profile.firstColor"),value:s.colorA,onInput:s.setColorA}),t.jsx(jt,{label:i("settings.account.profile.secondColor"),value:s.colorB,onInput:s.setColorB}),t.jsx(rs,{label:i("settings.account.profile.userIcon"),value:s.userIcon,onInput:s.setUserIcon})]}),t.jsx("div",{className:"flex justify-center mt-8",children:t.jsx(q,{theme:"purple",className:"!px-20",onClick:s.close,children:i("settings.account.profile.finish")})})]})})}function Os(s){const{t:i}=_(),{logout:c}=kt(),d=It("profile-edit");return t.jsxs(Ie,{paddingClass:"px-8 py-10",className:"!mt-8",children:[t.jsx(Es,{id:d.id,close:d.hide,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),t.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[t.jsx("div",{children:t.jsx(cs,{profile:{colorA:s.colorA,colorB:s.colorB,icon:s.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:t.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:d.show,children:[t.jsx(ie,{icon:B.EDIT}),i("settings.account.accountDetails.editProfile")]})})}),t.jsx("div",{children:t.jsxs("div",{className:"space-y-8 max-w-xs",children:[t.jsx(We,{label:i("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:i("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:s.deviceName,onChange:l=>s.setDeviceName(l)}),t.jsx("div",{className:"flex space-x-3",children:t.jsx(q,{theme:"danger",onClick:c,children:i("settings.account.accountDetails.logoutButton")})})]})})]})]})}function At(s){const{t:i}=_();return t.jsxs("div",{className:K({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!s.fullscreen,"fixed inset-0 z-[60]":s.fullscreen}),children:[s.fullscreen&&s.show?t.jsx(As,{children:t.jsx("html",{"data-no-scroll":!0})}):null,t.jsx(Et,{animation:"fade",show:s.show,children:t.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[t.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:s.onToggle,children:t.jsx(ie,{icon:s.fullscreen?B.X:B.EXPAND})}),t.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] bottom-0 p-4",children:t.jsx("div",{className:s.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:t.jsx(us,{text:i("settings.subtitles.previewQuote")??void 0,styling:s.styling,overrideCasing:!1})})})]})})]})}function Ds(s){const{t:i}=_(),[c,d]=S.useState(!1);return t.jsxs("div",{children:[t.jsx(he,{border:!0,children:i("settings.subtitles.title")}),t.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx(wt,{label:i("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:l=>s.setStyling({...s.styling,backgroundOpacity:l/100}),value:s.styling.backgroundOpacity*100,textTransformer:l=>`${l}%`}),t.jsx(wt,{label:i("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:l=>`${l}%`,onChange:l=>s.setStyling({...s.styling,size:l/100}),value:s.styling.size*100}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(ls.FieldTitle,{children:i("settings.subtitles.colorLabel")}),t.jsx("div",{className:"flex justify-center items-center",children:os.map(l=>t.jsx(ds,{onClick:()=>s.setStyling({...s.styling,color:l}),color:l,active:s.styling.color===l},l))})]})]}),t.jsx(At,{show:!0,styling:s.styling,onToggle:()=>d(l=>!l)}),t.jsx(At,{show:c,fullscreen:!0,styling:s.styling,onToggle:()=>d(l=>!l)})]})]})}function Ms(s){let{proxyUrls:i,setProxyUrls:c}=s;const{t:d}=_(),l=S.useCallback(()=>{c(u=>[...u??[],""])},[c]),m=S.useCallback((u,p)=>{c(k=>[...(k??[]).map((A,x)=>x!==u?A:p)])},[c]),h=S.useCallback(u=>{c(p=>[...(p??[]).filter((k,A)=>A!==u)])},[c]);return t.jsxs(Ie,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:d("settings.connections.workers.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:d("settings.connections.workers.description")})]}),t.jsx("div",{children:t.jsx(Ot,{onClick:()=>c(u=>u===null?[]:null),enabled:i!==null})})]}),i!==null?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:d("settings.connections.workers.urlLabel")}),t.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((i==null?void 0:i.length)??0)===0?t.jsx("p",{children:d("settings.connections.workers.emptyState")}):null,(i??[]).map((u,p)=>t.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[t.jsx(We,{value:u,onChange:k=>m(p,k),placeholder:d("settings.connections.workers.urlPlaceholder")??void 0}),t.jsx("button",{type:"button",onClick:()=>h(p),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:t.jsx(ie,{className:"text-xl",icon:B.X})})]},p))]}),t.jsx(q,{theme:"purple",onClick:l,children:d("settings.connections.workers.addButton")})]}):null]})}function Rs(s){let{backendUrl:i,setBackendUrl:c}=s;const{t:d}=_();return t.jsxs(Ie,{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsxs("div",{className:"my-3",children:[t.jsx("p",{className:"text-white font-bold mb-3",children:d("settings.connections.server.label")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:d("settings.connections.server.description")})]}),t.jsx("div",{children:t.jsx(Ot,{onClick:()=>c(l=>l===null?"":null),enabled:i!==null})})]}),i!==null?t.jsxs(t.Fragment,{children:[t.jsx(Xe,{marginClass:"my-6 px-8 box-content -mx-8"}),t.jsx("p",{className:"text-white font-bold mb-3",children:d("settings.connections.server.urlLabel")}),t.jsx(We,{onChange:c,value:i??""})]}):null]})}function Hs(s){const{t:i}=_();return t.jsxs("div",{children:[t.jsx(he,{border:!0,children:i("settings.connections.title")}),t.jsxs("div",{className:"space-y-6",children:[t.jsx(Ms,{proxyUrls:s.proxyUrls,setProxyUrls:s.setProxyUrls}),t.jsx(Rs,{backendUrl:s.backendUrl,setBackendUrl:s.setBackendUrl})]})]})}function Fs(s){return t.jsx("p",{className:"text-type-text",children:s.children})}function Ks(s){const{t:i}=_(),c=fe(),d=U(h=>{var u;return(u=h.account)==null?void 0:u.token}),[l,m]=Ye(async()=>{var h;if(!d)throw new Error("No token present");await fs(c,d,s.id),(h=s.onRemove)==null||h.call(s)},[c,d,s.id]);return t.jsxs(Ie,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[t.jsxs("div",{className:"font-medium",children:[t.jsx(Fs,{children:i("settings.account.devices.deviceNameLabel")}),t.jsx("p",{className:"text-white",children:s.name})]}),s.isCurrent?null:t.jsx(q,{theme:"danger",loading:l.loading,onClick:m,children:i("settings.account.devices.removeDevice")})]})}function zs(s){const{t:i}=_(),c=U(h=>{var u;return(u=h.account)==null?void 0:u.seed}),d=s.sessions,l=U(h=>{var u;return(u=h.account)==null?void 0:u.sessionId}),m=S.useMemo(()=>{if(!c)return[];let h=d.map(u=>{const p=Dt(u.device,qe(c));return{current:u.id===l,id:u.id,name:p}});return h=h.sort((u,p)=>u.current?-1:p.current?1:u.name.localeCompare(p.name)),h},[c,d,l]);return c?t.jsxs("div",{children:[t.jsx(Te,{border:!0,className:"mt-0 mb-9",children:i("settings.account.devices.title")}),s.error?t.jsx("p",{children:i("settings.account.devices.failed")}):s.loading?t.jsx(gs,{}):t.jsx("div",{className:"space-y-5",children:m.map(h=>t.jsx(Ks,{name:h.name,id:h.id,isCurrent:h.current,onRemove:s.onChange},h.id))})]}):null}function Gs(){const s=ns(),{t:i}=_();return t.jsx("div",{children:t.jsxs(Rt,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[t.jsxs("div",{children:[t.jsx(Lt,{children:i("settings.account.register.title")}),t.jsx("p",{className:"text-type-text",children:i("settings.account.register.text")})]}),t.jsx("div",{className:"flex justify-end items-center",children:t.jsx(q,{theme:"purple",onClick:()=>s("/register"),children:i("settings.account.register.cta")})})]})})}function Tt(s){return t.jsxs("section",{className:s.className??"",children:[t.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:s.title}),s.children]})}function $s(s){return t.jsxs("button",{type:"button",onClick:s.onClick,className:K("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",s.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[t.jsx(ie,{className:K("text-2xl text-settings-sidebar-type-icon",s.active?"text-settings-sidebar-type-iconActivated":null),icon:s.icon}),t.jsx("span",{children:s.children})]})}const qs=16;function Ws(s){const{t:i}=_(),c=s.url.startsWith("https://");return t.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[t.jsx(ie,{icon:c?B.LOCK:B.UNLOCK}),i(c?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function Xs(){var A;const{t:s}=_(),{isMobile:i}=Mt(),{account:c}=U(),d=location.hostname,[l,m]=S.useState(""),h=[{textKey:"settings.account.title",id:"settings-account",icon:B.USER},{textKey:"settings.locale.title",id:"settings-locale",icon:B.BOOKMARK},{textKey:"settings.appearance.title",id:"settings-appearance",icon:B.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:B.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:B.LINK}],u=fe(),p=Ts(async()=>hs(u),[u]);S.useEffect(()=>{function x(){var T;const E=(window.innerHeight||document.documentElement.clientHeight)/4,W=h.map(I=>{const R=document.getElementById(I.id);if(!R)return{distance:1/0,link:I.id};const o=R.getBoundingClientRect(),X=Math.abs(E-o.top),f=Math.abs(E-o.bottom);return{distance:Math.min(f,X),link:I.id}}).sort((I,R)=>I.distance-R.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?m(h[h.length-1].id):m(((T=W[0])==null?void 0:T.link)??"")}return document.addEventListener("scroll",x),x(),()=>{document.removeEventListener("scroll",x)}});const k=S.useCallback(x=>{const M=document.getElementById(x);if(!M)return null;const E=M.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:E-120,behavior:"smooth"})},[]);return t.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:t.jsxs(Ps,{topOffset:-6*qs,stickyClassName:"pt-[6rem]",disabled:i,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[t.jsxs("div",{className:"hidden lg:block",children:[t.jsx(Tt,{title:s("global.pages.settings"),children:h.map(x=>t.jsx($s,{icon:x.icon,active:x.id===l,onClick:()=>k(x.id),children:s(x.textKey)},x.id))}),t.jsx(Xe,{})]}),t.jsx(Tt,{className:"text-sm",title:s("settings.sidebar.info.title"),children:t.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.hostname")}),t.jsx("p",{className:"text-white",children:d})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[t.jsx("p",{children:s("settings.sidebar.info.backendUrl")}),t.jsx(Ws,{url:u})]}),t.jsx("p",{className:"text-white",children:u.replace(/https?:\/\//,"")})]}),t.jsxs("div",{className:"col-span-2 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.userId")}),t.jsx("p",{className:"text-white",children:(c==null?void 0:c.userId)??s("settings.sidebar.info.notLoggedIn")})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.appVersion")}),t.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:ms().APP_VERSION})]}),t.jsxs("div",{className:"col-span-1 space-y-1",children:[t.jsx("p",{className:"text-type-dimmed font-medium",children:s("settings.sidebar.info.backendVersion")}),t.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[p.error?t.jsx(ie,{icon:B.WARNING,className:"text-type-danger text-base"}):null,p.loading?t.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((A=p==null?void 0:p.value)==null?void 0:A.version)||s("settings.sidebar.info.unknownVersion")]})]})]})})]})})}const Ys=[{id:"blue",key:"settings.appearance.themes.blue"},{id:"teal",key:"settings.appearance.themes.teal"},{id:"red",key:"settings.appearance.themes.red"},{id:"gray",key:"settings.appearance.themes.gray"}],Js=function(i){const{t:c}=_();return t.jsxs("div",{className:K(i.selector,"cursor-pointer group tabbable"),onClick:i.onClick,children:[t.jsxs("div",{tabIndex:0,onKeyUp:d=>d.key==="Enter"&&d.currentTarget.click(),className:K("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",i.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[t.jsxs("div",{className:"absolute top-2 left-2",children:[t.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),t.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),t.jsx(ie,{icon:B.CHECKMARK,className:K("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",i.active?"opacity-100":"opacity-0")}),t.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:t.jsxs("div",{className:"relative w-full h-full",children:[t.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),t.jsxs("div",{className:"p-2 flex justify-between items-center",children:[t.jsxs("div",{className:"flex space-x-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),t.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),t.jsxs("div",{className:"mt-5 px-3",children:[t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),t.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),t.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),t.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[t.jsx("span",{className:"font-medium text-white",children:i.name}),t.jsx("span",{className:K("inline-block px-3 text-sm transition-opacity duration-150 rounded-full bg-[#27182F] text-white",i.active?"opacity-100":"opacity-0 pointer-events-none"),children:c("settings.appearance.activeTheme")})]})]})},Pt=Js;function Qs(s){const{t:i}=_();return t.jsxs("div",{children:[t.jsx(he,{border:!0,children:i("settings.appearance.title")}),t.jsxs("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-6 max-w-[700px]",children:[t.jsx(Pt,{name:i("settings.appearance.themes.default"),selector:"theme-default",active:s.active===null,onClick:()=>s.setTheme(null)}),Ys.map(c=>t.jsx(Pt,{selector:`theme-${c.id}`,active:s.active===c.id,name:i(c.key),onClick:()=>s.setTheme(c.id)},c.id))]})]})}function Zs(s){const{t:i}=_(),c=xs(Nt.map(m=>m.code)),d=Nt.sort((m,h)=>c.indexOf(m.code)-c.indexOf(h.code)).map(m=>({id:m.code,name:`${m.name} — ${m.nativeName}`,leftIcon:t.jsx(Is,{countryCode:m.code})})),l=d.find(m=>m.id===s.language);return t.jsxs("div",{children:[t.jsx(he,{border:!0,children:i("settings.locale.title")}),t.jsx("p",{className:"text-white font-bold mb-3",children:i("settings.locale.language")}),t.jsx("p",{className:"max-w-[20rem] font-medium",children:i("settings.locale.languageDescription")}),t.jsx(ps,{options:d,selectedItem:l||d[0],setSelectedItem:m=>s.setLanguage(m.id)})]})}function Vs(s){const{isMobile:i}=Mt();return t.jsx(Cs,{ultraWide:!0,classNames:"overflow-visible",children:t.jsxs("div",{className:K("grid gap-12",i?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[t.jsx(Xs,{}),t.jsx("div",{children:s.children})]})})}function ea(s){const i=fe(),{account:c}=s,[d,l]=Ye(()=>bs(i,c),[c,i]);return S.useEffect(()=>{l()},[l]),t.jsxs(t.Fragment,{children:[t.jsx(Os,{deviceName:s.deviceName,setDeviceName:s.setDeviceName,colorA:s.colorA,setColorA:s.setColorA,colorB:s.colorB,setColorB:s.setColorB,userIcon:s.userIcon,setUserIcon:s.setUserIcon}),t.jsx(zs,{error:!!d.error,loading:d.loading,sessions:d.value??[],onChange:l}),t.jsx(ks,{})]})}function da(){const{t:s}=_(),i=_t(f=>f.theme),c=_t(f=>f.setTheme),d=Ct(f=>f.language),l=Ct(f=>f.setLanguage),m=St(f=>f.styling),h=St(f=>f.updateStyling),u=U(f=>f.proxySet),p=U(f=>f.setProxySet),k=U(f=>f.backendUrl),A=U(f=>f.setBackendUrl),x=U(f=>f.account),M=U(f=>f.setAccountProfile),E=U(f=>f.updateDeviceName),W=S.useMemo(()=>x?Dt(x.deviceName,qe(x.seed)):"",[x]),T=fe(),{logout:I}=kt(),R=U(),o=Bs(i,d,m,W,u,k,x==null?void 0:x.profile),X=S.useCallback(async()=>{if(x){if((o.appLanguage.changed||o.theme.changed)&&await vs(T,x,{applicationLanguage:o.appLanguage.state,applicationTheme:o.theme.state}),o.deviceName.changed){const f=await ys(o.deviceName.state,qe(x.seed));await js(T,x,{deviceName:f}),E(f)}o.profile.changed&&await ws(T,x,{profile:o.profile.state})}l(o.appLanguage.state),c(o.theme.state),h(o.subtitleStyling.state),p(o.proxyUrls.state),o.profile.state&&M(o.profile.state),o.backendUrl.changed&&(await I(),A(o.backendUrl.state))},[o,x,T,l,c,h,E,M,p,A,I]);return t.jsxs(Ns,{children:[t.jsx(_s,{subpage:!0,k:"global.pages.settings"}),t.jsxs(Vs,{children:[t.jsxs("div",{id:"settings-account",children:[t.jsx(he,{border:!0,className:"!mb-0",children:s("settings.account.title")}),R.account&&o.profile.state?t.jsx(ea,{account:R.account,deviceName:o.deviceName.state,setDeviceName:o.deviceName.set,colorA:o.profile.state.colorA,setColorA:f=>{o.profile.set(P=>P?{...P,colorA:f}:void 0)},colorB:o.profile.state.colorB,setColorB:f=>o.profile.set(P=>P?{...P,colorB:f}:void 0),userIcon:o.profile.state.icon,setUserIcon:f=>o.profile.set(P=>P?{...P,icon:f}:void 0)}):t.jsx(Gs,{})]}),t.jsx("div",{id:"settings-locale",className:"mt-48",children:t.jsx(Zs,{language:o.appLanguage.state,setLanguage:o.appLanguage.set})}),t.jsx("div",{id:"settings-appearance",className:"mt-48",children:t.jsx(Qs,{active:o.theme.state,setTheme:o.theme.set})}),t.jsx("div",{id:"settings-captions",className:"mt-48",children:t.jsx(Ds,{styling:o.subtitleStyling.state,setStyling:o.subtitleStyling.set})}),t.jsx("div",{id:"settings-connection",className:"mt-48",children:t.jsx(Hs,{backendUrl:o.backendUrl.state,setBackendUrl:o.backendUrl.set,proxyUrls:o.proxyUrls.state,setProxyUrls:o.proxyUrls.set})})]}),t.jsxs(Et,{animation:"fade",show:o.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3",children:[t.jsx("p",{className:"text-type-danger",children:s("settings.unsaved")}),t.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[t.jsx(q,{className:"w-full md:w-auto",theme:"secondary",onClick:o.reset,children:s("settings.reset")}),t.jsx(q,{className:"w-full md:w-auto",theme:"purple",onClick:X,children:s("settings.save")})]})]})]})}export{ea as AccountSettings,da as SettingsPage,da as default};
//# sourceMappingURL=Settings-iHqCgPgs.js.map
